"use strict";(self.webpackChunkharvester_docs=self.webpackChunkharvester_docs||[]).push([[63011],{2716:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>s});n(67294);var a=n(3905);const i={sidebar_position:5,sidebar_label:"Harvester Configuration",title:"Harvester Configuration",keywords:["Harvester","harvester","Rancher","rancher","Harvester Configuration"],description:"Harvester configuration file can be provided during manual or automatic installation to configure various settings."},l=void 0,r={unversionedId:"install/harvester-configuration",id:"version-v1.3/install/harvester-configuration",title:"Harvester Configuration",description:"Harvester configuration file can be provided during manual or automatic installation to configure various settings.",source:"@site/versioned_docs/version-v1.3/install/harvester-configuration.md",sourceDirName:"install",slug:"/install/harvester-configuration",permalink:"/v1.3/install/harvester-configuration",draft:!1,editUrl:"https://github.com/harvester/docs/edit/main/versioned_docs/version-v1.3/install/harvester-configuration.md",tags:[],version:"v1.3",lastUpdatedAt:1720145056,formattedLastUpdatedAt:"Jul 5, 2024",sidebarPosition:5,frontMatter:{sidebar_position:5,sidebar_label:"Harvester Configuration",title:"Harvester Configuration",keywords:["Harvester","harvester","Rancher","rancher","Harvester Configuration"],description:"Harvester configuration file can be provided during manual or automatic installation to configure various settings."},sidebar:"api",previous:{title:"PXE Boot Installation",permalink:"/v1.3/install/pxe-boot-install"},next:{title:"Update Harvester Configuration",permalink:"/v1.3/install/update-harvester-configuration"}},o={},s=[{value:"Configuration Example",id:"configuration-example",level:2},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"<code>scheme_version</code>",id:"scheme_version",level:3},{value:"Definition",id:"definition",level:4},{value:"<code>server_url</code>",id:"server_url",level:3},{value:"Definition",id:"definition-1",level:4},{value:"Example",id:"example",level:4},{value:"<code>token</code>",id:"token",level:3},{value:"Definition",id:"definition-2",level:4},{value:"Example",id:"example-1",level:4},{value:"<code>os.ssh_authorized_keys</code>",id:"osssh_authorized_keys",level:3},{value:"Definition",id:"definition-3",level:4},{value:"Example",id:"example-2",level:4},{value:"<code>os.write_files</code>",id:"oswrite_files",level:3},{value:"<code>os.persistent_state_paths</code>",id:"ospersistent_state_paths",level:3},{value:"Definition",id:"definition-4",level:4},{value:"Example",id:"example-3",level:4},{value:"<code>os.after_install_chroot_commands</code>",id:"osafter_install_chroot_commands",level:3},{value:"Definition",id:"definition-5",level:4},{value:"Example",id:"example-4",level:4},{value:"<code>os.hostname</code>",id:"oshostname",level:3},{value:"Definition",id:"definition-6",level:4},{value:"Example",id:"example-5",level:4},{value:"<code>os.modules</code>",id:"osmodules",level:3},{value:"Definition",id:"definition-7",level:4},{value:"Example",id:"example-6",level:4},{value:"<code>os.sysctls</code>",id:"ossysctls",level:3},{value:"Definition",id:"definition-8",level:4},{value:"Example",id:"example-7",level:4},{value:"<code>os.dns_nameservers</code>",id:"osdns_nameservers",level:3},{value:"Definition",id:"definition-9",level:4},{value:"Example",id:"example-8",level:4},{value:"<code>os.ntp_servers</code>",id:"osntp_servers",level:3},{value:"Definition",id:"definition-10",level:4},{value:"Example",id:"example-9",level:4},{value:"<code>os.password</code>",id:"ospassword",level:3},{value:"Definition",id:"definition-11",level:4},{value:"Example",id:"example-10",level:4},{value:"<code>os.environment</code>",id:"osenvironment",level:3},{value:"Definition",id:"definition-12",level:4},{value:"Example",id:"example-11",level:4},{value:"<code>os.labels</code>",id:"oslabels",level:3},{value:"Definition",id:"definition-13",level:4},{value:"Example",id:"example-12",level:4},{value:"<code>os.sshd.sftp</code>",id:"ossshdsftp",level:3},{value:"Definition",id:"definition-14",level:4},{value:"Example",id:"example-13",level:4},{value:"<code>install.addons</code>",id:"installaddons",level:3},{value:"<code>install.automatic</code>",id:"installautomatic",level:3},{value:"<code>install.data_disk</code>",id:"installdata_disk",level:3},{value:"<code>install.debug</code>",id:"installdebug",level:3},{value:"<code>install.device</code>",id:"installdevice",level:3},{value:"<code>install.force_efi</code>",id:"installforce_efi",level:3},{value:"<code>install.force_mbr</code>",id:"installforce_mbr",level:3},{value:"<code>install.harvester.longhorn.default_settings.guaranteedEngineManagerCPU</code>",id:"installharvesterlonghorndefault_settingsguaranteedenginemanagercpu",level:3},{value:"<code>install.harvester.longhorn.default_settings.guaranteedReplicaManagerCPU</code>",id:"installharvesterlonghorndefault_settingsguaranteedreplicamanagercpu",level:3},{value:"<code>install.harvester.storage_class.replica_count</code>",id:"installharvesterstorage_classreplica_count",level:3},{value:"<code>install.iso_url</code>",id:"installiso_url",level:3},{value:"<code>install.management_interface</code>",id:"installmanagement_interface",level:3},{value:"<code>install.mode</code>",id:"installmode",level:3},{value:"<code>install.no_format</code>",id:"installno_format",level:3},{value:"<code>install.persistent_partition_size</code>",id:"installpersistent_partition_size",level:3},{value:"<code>install.poweroff</code>",id:"installpoweroff",level:3},{value:"<code>install.rawdiskimagepath</code>",id:"installrawdiskimagepath",level:3},{value:"<code>install.role</code>",id:"installrole",level:3},{value:"<code>install.silent</code>",id:"installsilent",level:3},{value:"<code>install.skipchecks</code>",id:"installskipchecks",level:3},{value:"<code>install.tty</code>",id:"installtty",level:3},{value:"<code>install.vip</code>",id:"installvip",level:3},{value:"<code>install.vip_mode</code>",id:"installvip_mode",level:3},{value:"<code>install.vip_hw_addr</code>",id:"installvip_hw_addr",level:3},{value:"<code>install.webhooks</code>",id:"installwebhooks",level:3},{value:"<code>install.wipedisks</code>",id:"installwipedisks",level:3},{value:"<code>install.with-net-images</code>",id:"installwith-net-images",level:3},{value:"<code>system_settings</code>",id:"system_settings",level:3},{value:"Definition",id:"definition-15",level:4},{value:"Example",id:"example-14",level:4}],d={toc:s},p="wrapper";function m({components:e,...t}){return(0,a.kt)(p,{...d,...t,components:e,mdxType:"MDXLayout"},(0,a.kt)("head",null,(0,a.kt)("link",{rel:"canonical",href:"https://docs.harvesterhci.io/v1.1/install/harvester-configuration"})),(0,a.kt)("h2",{id:"configuration-example"},"Configuration Example"),(0,a.kt)("p",null,"Harvester configuration file can be provided during manual or automatic installation to configure various settings. The following is a configuration example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'scheme_version: 1\nserver_url: https://cluster-VIP:443\ntoken: TOKEN_VALUE\nos:\n  ssh_authorized_keys:\n    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQAB...\n    - github:username\n  write_files:\n  - encoding: ""\n    content: test content\n    owner: root\n    path: /etc/test.txt\n    permissions: \'0755\'\n  hostname: myhost\n  modules:\n    - kvm\n    - nvme\n  sysctls:\n    kernel.printk: "4 4 1 7"\n    kernel.kptr_restrict: "1"\n  dns_nameservers:\n    - 8.8.8.8\n    - 1.1.1.1\n  ntp_servers:\n    - 0.suse.pool.ntp.org\n    - 1.suse.pool.ntp.org\n  password: rancher\n  environment:\n    http_proxy: http://myserver\n    https_proxy: http://myserver\n  labels:\n    topology.kubernetes.io/zone: zone1\n    foo: bar\n    mylabel: myvalue\ninstall:\n  mode: create\n  management_interface:\n    interfaces:\n    - name: ens5\n      hwAddr: "B8:CA:3A:6A:64:7C"\n    method: dhcp\n  force_efi: true\n  device: /dev/sda\n  data_disk: /dev/sdb\n  silent: true\n  iso_url: http://myserver/test.iso\n  poweroff: true\n  no_format: true\n  debug: true\n  tty: ttyS0\n  vip: 10.10.0.19\n  vip_hw_addr: 52:54:00:ec:0e:0b\n  vip_mode: dhcp\n  force_mbr: false\n  addons:\n    harvester_vm_import_controller:\n      enabled: false\n      values_content: ""\n    harvester_pcidevices_controller:\n      enabled: false\n      values_content: ""\n    rancher_monitoring:\n      enabled: true\n      values_content: ""\n    rancher_logging:\n      enabled: false\n      values_content: ""\n    harvester_seeder:\n      enabled: false\n      values_content: ""\nsystem_settings:\n  auto-disk-provision-paths: ""\n')),(0,a.kt)("h2",{id:"configuration-reference"},"Configuration Reference"),(0,a.kt)("p",null,"Below is a reference of all configuration keys."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"Security Risks"),": The configuration file contains credentials which should be kept secret. Please do not make the configuration file publicly accessible.")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"Configuration Priority"),": When you provide a remote Harvester Configuration file during the install of Harvester, the Harvester Configuration file will not overwrite the values for the inputs you had previously filled out and selected.  Priority is given to the values that you input during the guided install.\nFor instance, if you have in your Harvester Configuration file specified ",(0,a.kt)("inlineCode",{parentName:"p"},"os.hostname")," and during install you fill in the field of ",(0,a.kt)("inlineCode",{parentName:"p"},"hostname")," when prompted, the value that you filled in will take priority over your Harvester Configuration's ",(0,a.kt)("inlineCode",{parentName:"p"},"os.hostname"),".")),(0,a.kt)("h3",{id:"scheme_version"},(0,a.kt)("inlineCode",{parentName:"h3"},"scheme_version")),(0,a.kt)("h4",{id:"definition"},"Definition"),(0,a.kt)("p",null,"The version of scheme reserved for future configuration migration."),(0,a.kt)("p",null,"This configuration is mandatory for migrating the configuration to a new scheme version. It tells Harvester the previous version and the need to migrate."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"This field didn't take any effect in the current Harvester version.")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Make sure that your custom configuration always has the correct scheme version.")),(0,a.kt)("h3",{id:"server_url"},(0,a.kt)("inlineCode",{parentName:"h3"},"server_url")),(0,a.kt)("h4",{id:"definition-1"},"Definition"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"server_url")," is the URL of the Harvester cluster, which is used for the new ",(0,a.kt)("inlineCode",{parentName:"p"},"node")," to join the cluster."),(0,a.kt)("p",null,"This configuration is mandatory when the installation is in ",(0,a.kt)("inlineCode",{parentName:"p"},"JOIN")," mode. The default format of ",(0,a.kt)("inlineCode",{parentName:"p"},"server_url")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"https://cluster-VIP:443"),"."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"To ensure a high availability (HA) Harvester cluster, please use either the Harvester cluster ",(0,a.kt)("a",{parentName:"p",href:"#installvip"},"VIP")," or a domain name in ",(0,a.kt)("inlineCode",{parentName:"p"},"server_url"),".")),(0,a.kt)("h4",{id:"example"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"server_url: https://cluster-VIP:443\ninstall:\n  mode: join\n")),(0,a.kt)("h3",{id:"token"},(0,a.kt)("inlineCode",{parentName:"h3"},"token")),(0,a.kt)("h4",{id:"definition-2"},"Definition"),(0,a.kt)("p",null,"The cluster secret or node token. If the value matches the format of a node token it will\nautomatically be assumed to be a node token. Otherwise it is treated as a cluster secret."),(0,a.kt)("p",null,"In order for a new node to join the Harvester cluster, the token should match what the server has."),(0,a.kt)("h4",{id:"example-1"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"token: myclustersecret\n")),(0,a.kt)("p",null,"Or a node token"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'token: "K1074ec55daebdf54ef48294b0ddf0ce1c3cb64ee7e3d0b9ec79fbc7baf1f7ddac6::node:77689533d0140c7019416603a05275d4"\n')),(0,a.kt)("hr",null),(0,a.kt)("p",null,"\xa0"),(0,a.kt)("h3",{id:"osssh_authorized_keys"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.ssh_authorized_keys")),(0,a.kt)("h4",{id:"definition-3"},"Definition"),(0,a.kt)("p",null,"A list of SSH authorized keys that should be added to the default user, ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher"),". SSH keys can be obtained from GitHub user accounts by using the format\n",(0,a.kt)("inlineCode",{parentName:"p"},"github:${USERNAME}"),". This is done by downloading the keys from ",(0,a.kt)("inlineCode",{parentName:"p"},"https://github.com/${USERNAME}.keys"),"."),(0,a.kt)("h4",{id:"example-2"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'os:\n  ssh_authorized_keys:\n    - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC2TBZGjE+J8ag11dzkFT58J3XPONrDVmalCNrKxsfADfyy0eqdZrG8hcAxAR/5zuj90Gin2uBR4Sw6Cn4VHsPZcFpXyQCjK1QDADj+WcuhpXOIOY3AB0LZBly9NI0ll+8lo3QtEaoyRLtrMBhQ6Mooy2M3MTG4JNwU9o3yInuqZWf9PvtW6KxMl+ygg1xZkljhemGZ9k0wSrjqif+8usNbzVlCOVQmZwZA+BZxbdcLNwkg7zWJSXzDIXyqM6iWPGXQDEbWLq3+HR1qKucTCSxjbqoe0FD5xcW7NHIME5XKX84yH92n6yn+rxSsyUfhJWYqJd+i0fKf5UbN6qLrtd/D"\n    - "github:ibuildthecloud"\n')),(0,a.kt)("h3",{id:"oswrite_files"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.write_files")),(0,a.kt)("p",null,"A list of files to write to disk on boot. The ",(0,a.kt)("inlineCode",{parentName:"p"},"encoding")," field specifies the content's encoding. Valid ",(0,a.kt)("inlineCode",{parentName:"p"},"encoding")," values are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'""'),": content data are written in plain text. In this case, the ",(0,a.kt)("inlineCode",{parentName:"li"},"encoding")," field can be also omitted."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"b64"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"base64"),": content data are base64-encoded."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"gz"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"gzip"),": content data are gzip-compressed."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"gz+base64"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"gzip+base64"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"gz+b64"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"gzip+b64"),": content data are gzip-compressed first and then base64-encoded.")),(0,a.kt)("p",null,"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  write_files:\n  - encoding: b64\n    content: CiMgVGhpcyBmaWxlIGNvbnRyb2xzIHRoZSBzdGF0ZSBvZiBTRUxpbnV4...\n    owner: root:root\n    path: /etc/connman/main.conf\n    permissions: '0644'\n  - content: |\n      # My new /etc/sysconfig/samba file\n\n      SMDBOPTIONS=\"-D\"\n    path: /etc/sysconfig/samba\n  - content: !!binary |\n      f0VMRgIBAQAAAAAAAAAAAAIAPgABAAAAwARAAAAAAABAAAAAAAAAAJAVAAAAAA\n      AEAAHgAdAAYAAAAFAAAAQAAAAAAAAABAAEAAAAAAAEAAQAAAAAAAwAEAAAAAAA\n      AAAAAAAAAwAAAAQAAAAAAgAAAAAAAAACQAAAAAAAAAJAAAAAAAAcAAAAAAAAAB\n      ...\n    path: /bin/arch\n    permissions: '0555'\n  - content: |\n      15 * * * * root ship_logs\n    path: /etc/crontab\n")),(0,a.kt)("h3",{id:"ospersistent_state_paths"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.persistent_state_paths")),(0,a.kt)("h4",{id:"definition-4"},"Definition"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"os.persistent_state_paths")," option allows you to configure custom paths where modifications made to files will persist across reboots. Any changes to files in these paths will not be lost after a reboot."),(0,a.kt)("h4",{id:"example-3"},"Example"),(0,a.kt)("p",null,"Refer to the following example config for installing ",(0,a.kt)("inlineCode",{parentName:"p"},"rook-ceph")," in Harvester:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  persistent_state_paths:\n    - /var/lib/rook\n    - /var/lib/ceph\n  modules:\n    - rbd\n    - nbd\n")),(0,a.kt)("h3",{id:"osafter_install_chroot_commands"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.after_install_chroot_commands")),(0,a.kt)("h4",{id:"definition-5"},"Definition"),(0,a.kt)("p",null,"You can add additional software packages with ",(0,a.kt)("inlineCode",{parentName:"p"},"after_install_chroot_commands"),". The ",(0,a.kt)("inlineCode",{parentName:"p"},"after-install-chroot")," stage, provided by ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.github.io/elemental-toolkit/docs/"},"elemental-toolkit"),", allows you to execute commands not restricted by file system write issues, ensuring the persistence of user-defined commands even after a system reboot."),(0,a.kt)("h4",{id:"example-4"},"Example"),(0,a.kt)("p",null,"Refer to the following example config for installing an RPM package in Harvester:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  after_install_chroot_commands:\n    - rpm -ivh <the url of rpm package>\n  \n")),(0,a.kt)("p",null,"DNS resolution is unavailable in the ",(0,a.kt)("inlineCode",{parentName:"p"},"after-install-chroot stage"),", and the ",(0,a.kt)("inlineCode",{parentName:"p"},"nameserver")," might not be available. If you need to access a domain name to install a package using an URL, create a temporary ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/resolv.conf")," file first. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'os:\n  after_install_chroot_commands:\n    - "rm -f /etc/resolv.conf && echo \'nameserver 8.8.8.8\' | sudo tee /etc/resolv.conf"\n    - "mkdir /usr/local/bin"\n    - "curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 && chmod 700 get_helm.sh && ./get_helm.sh"\n    - "rm -f /etc/resolv.conf && ln -s /var/run/netconfig/resolv.conf /etc/resolv.conf"\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Upgrading Harvester causes the changes to the OS in the ",(0,a.kt)("inlineCode",{parentName:"p"},"after-install-chroot")," stage to be lost. You must also configure the ",(0,a.kt)("inlineCode",{parentName:"p"},"after-upgrade-chroot")," to make your changes persistent across an upgrade. Refer to ",(0,a.kt)("a",{parentName:"p",href:"https://rancher.github.io/elemental-toolkit/docs/customizing/runtime_persistent_changes/"},"Runtime persistent changes")," before upgrading Harvester.")),(0,a.kt)("h3",{id:"oshostname"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.hostname")),(0,a.kt)("h4",{id:"definition-6"},"Definition"),(0,a.kt)("p",null,"Set the system hostname. The installer will generate a random hostname if the user doesn't provide a value."),(0,a.kt)("h4",{id:"example-5"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  hostname: myhostname\n")),(0,a.kt)("h3",{id:"osmodules"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.modules")),(0,a.kt)("h4",{id:"definition-7"},"Definition"),(0,a.kt)("p",null,"A list of kernel modules to be loaded on start."),(0,a.kt)("h4",{id:"example-6"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  modules:\n    - kvm\n    - nvme\n")),(0,a.kt)("h3",{id:"ossysctls"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.sysctls")),(0,a.kt)("h4",{id:"definition-8"},"Definition"),(0,a.kt)("p",null,"Kernel sysctl to set up on start. These are the typical configurations found in ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/sysctl.conf"),".\nValues must be specified as strings."),(0,a.kt)("h4",{id:"example-7"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'os:\n  sysctls:\n    kernel.printk: 4 4 1 7 # the YAML parser will read as a string\n    kernel.kptr_restrict: "1" # force the YAML parser to read as a string\n')),(0,a.kt)("h3",{id:"osdns_nameservers"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.dns_nameservers")),(0,a.kt)("h4",{id:"definition-9"},"Definition"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Fallback")," DNS name servers to use if DNS is not configured by DHCP or in the OS."),(0,a.kt)("h4",{id:"example-8"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  dns_nameservers:\n    - 8.8.8.8\n    - 1.1.1.1\n")),(0,a.kt)("h3",{id:"osntp_servers"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.ntp_servers")),(0,a.kt)("h4",{id:"definition-10"},"Definition"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Fallback")," ntp servers to use if NTP is not configured elsewhere in the OS. Highly recommend to configure ",(0,a.kt)("inlineCode",{parentName:"p"},"os.ntp_servers")," to avoid time synchronization issue between machines."),(0,a.kt)("h4",{id:"example-9"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  ntp_servers:\n    - 0.suse.pool.ntp.org\n    - 1.suse.pool.ntp.org\n")),(0,a.kt)("h3",{id:"ospassword"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.password")),(0,a.kt)("h4",{id:"definition-11"},"Definition"),(0,a.kt)("p",null,"The password for the default user, ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher"),". By default, there is no password for the ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher")," user.\nIf you set a password at runtime it will be reset on the next boot. The\nvalue of the password can be clear text or an encrypted form. The easiest way to get this encrypted\nform is to change your password on a Linux system and copy the value of the second field from\n",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/shadow"),". You can also encrypt a password using OpenSSL. For the encryption algorithms\nsupported by Harvester, please refer to the table below."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"center"},"Algorithm"),(0,a.kt)("th",{parentName:"tr",align:"center"},"Command"),(0,a.kt)("th",{parentName:"tr",align:"center"},"Support"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"SHA-512"),(0,a.kt)("td",{parentName:"tr",align:"center"},(0,a.kt)("inlineCode",{parentName:"td"},"openssl passwd -6")),(0,a.kt)("td",{parentName:"tr",align:"center"},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"SHA-256"),(0,a.kt)("td",{parentName:"tr",align:"center"},(0,a.kt)("inlineCode",{parentName:"td"},"openssl passwd -5")),(0,a.kt)("td",{parentName:"tr",align:"center"},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"MD5"),(0,a.kt)("td",{parentName:"tr",align:"center"},(0,a.kt)("inlineCode",{parentName:"td"},"openssl passwd -1")),(0,a.kt)("td",{parentName:"tr",align:"center"},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"MD5, Apache variant"),(0,a.kt)("td",{parentName:"tr",align:"center"},(0,a.kt)("inlineCode",{parentName:"td"},"openssl passwd -apr1")),(0,a.kt)("td",{parentName:"tr",align:"center"},"Yes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"AIX-MD5"),(0,a.kt)("td",{parentName:"tr",align:"center"},(0,a.kt)("inlineCode",{parentName:"td"},"openssl passwd -aixmd5")),(0,a.kt)("td",{parentName:"tr",align:"center"},"No")))),(0,a.kt)("h4",{id:"example-10"},"Example"),(0,a.kt)("p",null,"Encrypted:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'os:\n  password: "$6$kZYUnRaTxNdg4W8H$WSEJydGWsNpaRbbbRdTDLJ2hDLbkizxSFGW2RtexlqG6njEATaGQG9ssztjaKDCsaNUPBZ1E1YdsvSLMAi/IO/"\n')),(0,a.kt)("p",null,"Or clear text:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  password: supersecure\n")),(0,a.kt)("h3",{id:"osenvironment"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.environment")),(0,a.kt)("h4",{id:"definition-12"},"Definition"),(0,a.kt)("p",null,"Environment variables to be set on K3s and other processes like the boot process.\nPrimary use of this field is to set the HTTP proxy."),(0,a.kt)("h4",{id:"example-11"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  environment:\n    http_proxy: http://myserver\n    https_proxy: http://myserver\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"This example sets the HTTP(S) proxy for ",(0,a.kt)("strong",{parentName:"p"},"foundational OS components"),".\nTo set up an HTTP(S) proxy for Harvester components such as fetching external images and backup to S3 services,\nsee ",(0,a.kt)("a",{parentName:"p",href:"/v1.3/advanced/index#http-proxy"},"Settings/http-proxy"),".")),(0,a.kt)("h3",{id:"oslabels"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.labels")),(0,a.kt)("h4",{id:"definition-13"},"Definition"),(0,a.kt)("p",null,"Labels to be added to this Node."),(0,a.kt)("h4",{id:"example-12"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  labels:\n    topology.kubernetes.io/zone: zone1\n    foo: bar\n    mylabel: myvalue\n")),(0,a.kt)("h3",{id:"ossshdsftp"},(0,a.kt)("inlineCode",{parentName:"h3"},"os.sshd.sftp")),(0,a.kt)("h4",{id:"definition-14"},"Definition"),(0,a.kt)("p",null,"Subsystem used to configure the OpenSSH Daemon (sshd). Harvester currently only supports ",(0,a.kt)("inlineCode",{parentName:"p"},"sftp"),"."),(0,a.kt)("h4",{id:"example-13"},"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"os:\n  sshd:\n    sftp: true  #  The SFTP subsystem is enabled.\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,"\xa0"),(0,a.kt)("h3",{id:"installaddons"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.addons")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that defines the default addon status. Harvester addons are disabled by default."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"vm-import-controller")," (chartName: harvester-vm-import-controller)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pcidevices-controller")," (chartName: harvester-pcidevices-controller)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"rancher-monitoring")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"rancher-logging")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"harvester-seeder")," (experimental)")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  addons:\n    rancher_monitoring:\n      enabled: true\n    rancher_logging:\n      enabled: false\n")),(0,a.kt)("h3",{id:"installautomatic"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.automatic")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that forces the installer to skip the interactive steps in the installation process. "),(0,a.kt)("p",null,"When enabled, the configuration is either retrieved from the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"harvester.install.config_url")," or defined individually using kernel parameters."),(0,a.kt)("h3",{id:"installdata_disk"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.data_disk")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.0.1 and later "),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Default device for storing VM data. "),(0,a.kt)("p",null,"When installing via PXE, use ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/disk/by-id/$id")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/disk/by-path/$path")," to specify the storage device if the server contains multiple physical volumes."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": Storage device configured in the setting ",(0,a.kt)("inlineCode",{parentName:"p"},"install.device")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  data_disk: /dev/sdb\n")),(0,a.kt)("h3",{id:"installdebug"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.debug")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that enables additional logging and debugging during installation. "),(0,a.kt)("h3",{id:"installdevice"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.device")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Device on which the Harvester OS is installed. "),(0,a.kt)("p",null,"When installing via PXE, use ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/disk/by-id/$id")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/disk/by-path/$path")," to specify the storage device if the server contains multiple physical volumes. "),(0,a.kt)("h3",{id:"installforce_efi"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.force_efi")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that forces EFI installation even when EFI is not detected."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"false")),(0,a.kt)("h3",{id:"installforce_mbr"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.force_mbr")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that forces usage of MBR partitioning on BIOS systems."),(0,a.kt)("p",null,"Harvester uses GPT partitioning on UEFI and BIOS systems by default. Compatibility issues may require you to use MBR partitioning instead."),(0,a.kt)("p",null,"If you specify the same storage device for both ",(0,a.kt)("inlineCode",{parentName:"p"},"install.device")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"install.data_disk"),", Harvester creates an additional partition for storing VM data. This additional partition is not created when you force usage of MBR partitioning. Instead, VM data is stored in a partition that stores OS data."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  force_mbr: true\n")),(0,a.kt)("h3",{id:"installharvesterlonghorndefault_settingsguaranteedenginemanagercpu"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.harvester.longhorn.default_settings.guaranteedEngineManagerCPU")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Percentage of the total allocatable CPU on each node to be reserved for each Longhorn Engine Manager pod."),(0,a.kt)("p",null,"Using the default value is recommended for high system availability. When deploying single-node Harvester clusters, you can specify a value less than 12. "),(0,a.kt)("p",null,"For more information about how to set the correct value, see ",(0,a.kt)("a",{parentName:"p",href:"https://longhorn.io/docs/archives/1.4.1/references/settings/#guaranteed-engine-manager-cpu"},"Guaranteed Engine Manager CPU")," in the Longhorn documentation."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": 12"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),": 0 to 12. All other values are considered 12."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  harvester:\n    longhorn:\n      default_settings:\n        guaranteedEngineManagerCPU: 6\n")),(0,a.kt)("h3",{id:"installharvesterlonghorndefault_settingsguaranteedreplicamanagercpu"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.harvester.longhorn.default_settings.guaranteedReplicaManagerCPU")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Percentage of the total allocatable CPU on each node to be reserved for each Longhorn Replica Manager pod."),(0,a.kt)("p",null,"Using the default value is recommended for high system availability. When deploying single-node Harvester clusters, you can specify a value less than 12. "),(0,a.kt)("p",null,"For more information about how to set the correct value, see ",(0,a.kt)("a",{parentName:"p",href:"https://longhorn.io/docs/archives/1.4.1/references/settings/#guaranteed-replica-manager-cpu"},"Guaranteed Replica Manager CPU")," in the Longhorn documentation."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": 12"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),": 0 to 12. All other values are considered 12."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  harvester:\n    longhorn:\n      default_settings:\n        guaranteedReplicaManagerCPU: 6\n")),(0,a.kt)("h3",{id:"installharvesterstorage_classreplica_count"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.harvester.storage_class.replica_count")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.1.2 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Replica count of the default Harvester StorageClass ",(0,a.kt)("inlineCode",{parentName:"p"},"harvester-longhorn"),"."),(0,a.kt)("p",null,"Using the default value is recommended for high storage availability. When deploying single-node Harvester clusters, you must set the value to 1."),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://longhorn.io/docs/1.6.0/references/settings/#default-replica-count"},"Default Replica Count")," in the Longhorn documentation."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": 3"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),": 1 to 3. All other values are considered 3."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  harvester:\n    storage_class:\n      replica_count: 1\n")),(0,a.kt)("h3",{id:"installiso_url"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.iso_url")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": URL of ISO image to be downloaded and used to install Harvester when booting from the kernel or vmlinuz."),(0,a.kt)("h3",{id:"installmanagement_interface"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.management_interface")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Network interfaces for the host machine. "),(0,a.kt)("p",null,"Harvester uses the ",(0,a.kt)("a",{parentName:"p",href:"https://www.freedesktop.org/software/systemd/man/systemd.net-naming-scheme.html"},"systemd net naming scheme"),". Ensure that the interface name is present on the target machine before installation."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Fields"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"method"),": Method used to assign an IP to the network. Supported values:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dhcp"),": Harvester requests an IP from the DHCP server."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"static"),": IP and gateway addresses are manually assigned."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ip"),": Static IP assigned to the network. This field is required when the value of ",(0,a.kt)("inlineCode",{parentName:"li"},"method")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"static"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"subnet_mask"),": Subnet mask of the network. This field is required when the value of ",(0,a.kt)("inlineCode",{parentName:"li"},"method")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"static"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"gateway"),": Gateway address assigned to the network. This field is required when the value of ",(0,a.kt)("inlineCode",{parentName:"li"},"method")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"static"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"interfaces"),": Array of network interfaces. The installer combines the specified interfaces (slaves) into a single logical bonded interface.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"interfaces.name"),": Name of a slave interface."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"interfaces.hwAddr"),": Hardware MAC address of a slave interface. This field is optional."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"bond_options"),": Options for ",(0,a.kt)("a",{parentName:"li",href:"https://www.kernel.org/doc/Documentation/networking/bonding.txt"},"bonded interfaces"),". When unspecified, the following options are used:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"mode"),": balance-tlb"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"miimon"),": 100"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"mtu"),": Maximum transmission unit (MTU) for the interface."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"vlan_id"),": VLAN ID for the interface.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'install:\n  mode: create\n  management_interface:\n    interfaces:\n    - name: ens5\n      hwAddr: "B8:CA:3A:6A:64:7D"  # Optional\n    method: dhcp\n    bond_options:\n      mode: balance-tlb\n      miimon: 100\n    mtu: 1492\n    vlan_id: 101\n')),(0,a.kt)("h3",{id:"installmode"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.mode")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Mode of installing Harvester."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"create"),": Create a new Harvester installation."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"join"),": Join an existing Harvester installation. You must specify the ",(0,a.kt)("inlineCode",{parentName:"li"},"server_url"),".")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  mode: create\n")),(0,a.kt)("h3",{id:"installno_format"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.no_format")),(0,a.kt)("p",null,"Definition: Setting that prevents partitioning and formatting of the installation disk."),(0,a.kt)("h3",{id:"installpersistent_partition_size"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.persistent_partition_size")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Size of the partition COS_PERSISTENT in Gi or Mi. "),(0,a.kt)("p",null,"This partition stores data such as system packages and container images. The minimum value is 150 Gi."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": 150 Gi"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  persistent_partition_size: 150Gi\n")),(0,a.kt)("h3",{id:"installpoweroff"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.poweroff")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that shuts down (instead of rebooting) the server after installation."),(0,a.kt)("h3",{id:"installrawdiskimagepath"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.rawdiskimagepath")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that forces the installer to only install the Harvester hypervisor (without any configuration). You must enable ",(0,a.kt)("inlineCode",{parentName:"p"},"harvester.install.automatic")," to use this setting."),(0,a.kt)("h3",{id:"installrole"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.role")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Role assigned to a node at the time of installation. When unspecified, Harvester assigns the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," role."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"default"),": Allows a node to function as a management node or a worker node."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"management"),": Allows a node to be prioritized when Harvester promotes nodes to management nodes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"worker"),": Restricts a node to being a worker node (never promoted to management node) in a specific cluster."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"witness"),": Restricts a node to being a witness node (only functions as an etcd node) in a specific cluster.")),(0,a.kt)("h3",{id:"installsilent"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.silent")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Definition: Reserved")),(0,a.kt)("h3",{id:"installskipchecks"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.skipchecks")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that allows installation to proceed even if minimum requirements for production use are not met"),(0,a.kt)("p",null,"The installer automatically checks if the hardware meets the ",(0,a.kt)("a",{parentName:"p",href:"./requirements/#hardware-requirements"},"minimum requirements")," for production use. When performing automated installation via ",(0,a.kt)("a",{parentName:"p",href:"./pxe-boot-install"},"PXE Boot"),", if any of the checks fail, installation is stopped, and warnings are printed to the system console and saved to ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/console.log")," in the installation environment."),(0,a.kt)("p",null,"To override this behavior, set ",(0,a.kt)("inlineCode",{parentName:"p"},"install.skipchecks=true"),". When set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", warning messages are still saved to ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/console.log"),", but the installation proceeds even if hardware requirements for production use are not met."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"false")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  skipchecks: true\n")),(0,a.kt)("h3",{id:"installtty"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.tty")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": TTY device used for the console."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  tty: ttyS0,115200n8\n")),(0,a.kt)("h3",{id:"installvip"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.vip")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": VIP of the Harvester management endpoint. "),(0,a.kt)("p",null,"After installation, you can access the Harvester UI at ",(0,a.kt)("inlineCode",{parentName:"p"},"https://<VIP>"),"."),(0,a.kt)("h3",{id:"installvip_mode"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.vip_mode")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Mode of assigning the VIP."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"dhcp"),": Harvester sends DHCP requests to get the VIP. You must specify the hardware address using the ",(0,a.kt)("inlineCode",{parentName:"li"},"install.vip_hw_addr")," field."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"static"),": Harvester uses a static VIP.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  vip: 192.168.0.100\n  vip_mode: static\n")),(0,a.kt)("h3",{id:"installvip_hw_addr"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.vip_hw_addr")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Hardware address corresponding to the VIP. "),(0,a.kt)("p",null,"You must configure an on-premises DHCP server to offer the configured VIP. This field is required when the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"install.vip_mode")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"dhcp"),". For more information, see ",(0,a.kt)("a",{parentName:"p",href:"/v1.3/install/management-address"},"Management Address"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"install:\n  vip: 10.10.0.19\n  vip_mode: dhcp\n  vip_hw_addr: 52:54:00:ec:0e:0b\n")),(0,a.kt)("h3",{id:"installwebhooks"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.webhooks")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Webhooks that allow you to receive notifications for certain installer-related events."),(0,a.kt)("p",null,"The installer sends HTTP requests to the specified URL. Multiple requests can be sent for a single event but if one request fails, the remaining requests are not sent."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Fields"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"event"),": Event type that triggers an HTTP action on the webhook. ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"STARTED"),": The installation has started."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SUCCEEDED"),": The installation was completed without errors."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"FAILED"),": The installation was unsuccessful."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"method"),": HTTP method "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"url"),": URL to which HTTP requests are sent"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"insecure"),": When set to ",(0,a.kt)("inlineCode",{parentName:"li"},"true"),", Harvester does not verify the server's certificate. The default value is ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"basicAuth"),": When set to ",(0,a.kt)("inlineCode",{parentName:"li"},"true"),', Harvester uses the "Basic" HTTP authentication scheme.'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"headers"),": When set to ",(0,a.kt)("inlineCode",{parentName:"li"},"true"),", custom headers are included in the HTTP requests. Headers such as ",(0,a.kt)("inlineCode",{parentName:"li"},"Content-Length")," are automatically included."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"payload"),"*: When set to ",(0,a.kt)("inlineCode",{parentName:"li"},"true"),", payload data is sent with the HTTP requests. You may need to set the correct Content-Type header in the ",(0,a.kt)("inlineCode",{parentName:"li"},"headers")," field to ensure that the server accepts the request.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'install:\n  webhooks:\n    - event: SUCCEEDED\n      method: GET\n      url: http://10.100.0.100/cblr/svc/op/nopxe/system/{{.Hostname}}\n    - event: STARTED\n      method: GET\n      url: https://10.100.0.100/started/{{.Hostname}}\n      insecure: true\n      basicAuth:\n        user: admin\n        password: p@assword\n    - event: FAILED\n      method: POST\n      url: http://10.100.0.100/record\n      headers:\n        Content-Type:\n           - \'application/json; charset=utf-8\'\n      payload: |\n        {\n          "host": "{{.Hostname}}",\n          "device": "hd"\n        }\n')),(0,a.kt)("h3",{id:"installwipedisks"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.wipedisks")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that clears all disk partitions on the host using the ",(0,a.kt)("inlineCode",{parentName:"p"},"sgdisk")," command."),(0,a.kt)("h3",{id:"installwith-net-images"},(0,a.kt)("inlineCode",{parentName:"h3"},"install.with-net-images")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that determines if images are pulled from the internet after installation."),(0,a.kt)("p",null,"The value of this field is typically derived from the kernel parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"harvester.install.with_net_images"),". When the value is ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", Harvester does not preload images packaged in the installation medium, and instead pulls images from the internet when necessary."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"\xa0"),(0,a.kt)("h3",{id:"system_settings"},(0,a.kt)("inlineCode",{parentName:"h3"},"system_settings")),(0,a.kt)("h4",{id:"definition-15"},"Definition"),(0,a.kt)("p",null,"You can overwrite the default Harvester system settings by configuring ",(0,a.kt)("inlineCode",{parentName:"p"},"system_settings"),".\nSee the ",(0,a.kt)("a",{parentName:"p",href:"/v1.3/advanced/index"},"Settings")," page for additional information and the list of all the options."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},'Overwriting system settings only works when Harvester is installed in "create" mode.\nIf you install Harvester in "join" mode, this setting is ignored.\nInstalling in "join" mode will adopt the system settings from the existing Harvester system.')),(0,a.kt)("h4",{id:"example-14"},"Example"),(0,a.kt)("p",null,"The example below overwrites ",(0,a.kt)("inlineCode",{parentName:"p"},"containerd-registry"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"http-proxy")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-source")," settings. The values must be a ",(0,a.kt)("inlineCode",{parentName:"p"},"string"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'system_settings:\n  containerd-registry: \'{"Mirrors": {"docker.io": {"Endpoints": ["https://myregistry.local:5000"]}}, "Configs": {"myregistry.local:5000": {"Auth": {"Username": "testuser", "Password": "testpassword"}, "TLS": {"InsecureSkipVerify": false}}}}\'\n  http-proxy: \'{"httpProxy": "http://my.proxy", "httpsProxy": "https://my.proxy", "noProxy": "some.internal.svc"}\'\n  ui-source: auto\n')))}m.isMDXComponent=!0}}]);